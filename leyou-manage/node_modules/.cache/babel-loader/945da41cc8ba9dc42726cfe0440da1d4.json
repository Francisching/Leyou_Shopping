{"remainingRequest":"C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\babel-loader\\lib\\index.js!C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\vuetify-loader\\lib\\loader.js!C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\lesson\\heima92\\code\\leyou-manage\\src\\views\\item\\specification\\SpecParam.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\lesson\\heima92\\code\\leyou-manage\\src\\views\\item\\specification\\SpecParam.vue","mtime":1571214655557},{"path":"C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\lesson\\heima92\\code\\leyou-manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectWithoutProperties from \"C:\\\\lesson\\\\heima92\\\\code\\\\leyou-manage\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _Object$assign from \"C:\\\\lesson\\\\heima92\\\\code\\\\leyou-manage\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"v-spec-param\",\n  props: {\n    group: {\n      type: Object\n    }\n  },\n  data: function data() {\n    return {\n      headers: [{\n        text: \"id\",\n        value: \"id\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"参数名\",\n        value: \"name\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"是否为数值\",\n        value: \"numeric\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"单位\",\n        value: \"unit\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"是否通用\",\n        value: \"generic\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"是否可搜索\",\n        value: \"searching\",\n        align: \"center\",\n        sortable: false\n      }, {\n        text: \"操作\",\n        align: \"center\",\n        sortable: false\n      }],\n      params: [],\n      // 参数\n      show: false,\n      param: {},\n      isEdit: false\n    };\n  },\n  watch: {\n    group: {\n      deep: true,\n      handler: function handler(val) {\n        if (val && val.id) {\n          this.loadData();\n        }\n      }\n    }\n  },\n  methods: {\n    loadData: function loadData() {\n      var _this = this;\n\n      this.$http.get(\"/item/spec/params?groupId=\" + this.group.id).then(function (_ref) {\n        var data = _ref.data;\n        data.forEach(function (p) {\n          p.segments = p.segments ? p.segments.split(\",\").map(function (s) {\n            return s.split(\"-\");\n          }) : [];\n          p.options = p.options ? p.options.split(\",\") : [];\n          p.hasOption = !!p.options && p.options.length > 0;\n        });\n        _this.params = data;\n      }).catch(function () {\n        _this.params = [];\n      });\n    },\n    editParam: function editParam(_ref2) {\n      var param = _Object$assign({}, _ref2);\n\n      this.param = param;\n      this.isEdit = true;\n      this.show = true;\n    },\n    addParam: function addParam() {\n      this.param = {\n        categoryId: this.group.categoryId,\n        groupId: this.group.id,\n        segments: [],\n        numeric: false,\n        searching: false,\n        generic: false,\n        options: [],\n        hasOptions: false\n      };\n      this.isEdit = false;\n      this.show = true;\n    },\n    deleteParam: function deleteParam(id) {\n      var _this2 = this;\n\n      this.$message.confirm(\"确认要删除该参数吗？\").then(function () {\n        _this2.$http.delete(\"/item/spec/param/\" + id).then(function () {\n          _this2.$message.success(\"删除成功\");\n        }).catch(function () {\n          _this2.$message.error(\"删除失败\");\n        });\n      });\n    },\n    formatBoolean: function formatBoolean(boo) {\n      return boo ? \"是\" : \"否\";\n    },\n    save: function save() {\n      var _this3 = this;\n\n      var _this$param = this.param,\n          hasOption = _this$param.hasOption,\n          p = _objectWithoutProperties(_this$param, [\"hasOption\"]);\n\n      p.segments = p.segments.map(function (s) {\n        return s.join(\"-\");\n      }).join(\",\");\n      p.options = p.options.join(\",\");\n      this.$http({\n        method: this.isEdit ? 'put' : 'post',\n        url: '/item/spec/param',\n        data: p\n      }).then(function () {\n        // 关闭窗口\n        _this3.show = false;\n\n        _this3.$message.success(\"保存成功！\");\n\n        _this3.loadData();\n      }).catch(function () {\n        _this3.$message.error(\"保存失败！\");\n      });\n    }\n  }\n};",{"version":3,"sources":["SpecParam.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <v-data-table\r\n      :headers=\"headers\"\r\n      :items=\"params\"\r\n      hide-actions\r\n      class=\"elevation-0\"\r\n    >\r\n      <template slot=\"items\" slot-scope=\"props\">\r\n        <td class=\"text-xs-center\">{{ props.item.id }}</td>\r\n        <td class=\"text-xs-center\">{{ props.item.name }}</td>\r\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.numeric) }}</td>\r\n        <td class=\"text-xs-center\">{{ props.item.unit || '无' }}</td>\r\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.generic) }}</td>\r\n        <td class=\"text-xs-center\">{{ formatBoolean(props.item.searching) }}</td>\r\n        <td class=\"justify-center layout px-0\">\r\n          <v-btn icon @click=\"editParam(props.item)\">\r\n            <i class=\"el-icon-edit\"/>\r\n          </v-btn>\r\n          <v-btn icon @click=\"deleteParam(props.item.id)\">\r\n            <i class=\"el-icon-delete\"/>\r\n          </v-btn>\r\n        </td>\r\n      </template>\r\n      <template slot=\"no-data\">\r\n        该分组下没有参数\r\n      </template>\r\n    </v-data-table>\r\n    <v-btn color='primary' @click=\"addParam\">新增参数</v-btn>\r\n    <v-dialog v-model=\"show\" max-width=\"350px\" scrollable persistent>\r\n      <v-card>\r\n        <v-card-text style=\"height: 300px;\">\r\n          <v-flex class=\"px-3\">\r\n            <v-text-field label=\"参数名称：\" v-model=\"param.name\"/>\r\n            <v-checkbox label=\"是否为通用属性\" v-model=\"param.generic\" color=\"primary\" hide-details/>\r\n            <v-checkbox label=\"是否为数值类型\" v-model=\"param.numeric\" color=\"primary\" hide-details/>\r\n            <v-text-field label=\"数值单位：\" v-model=\"param.unit\" v-if=\"param.numeric\"/>\r\n            <v-checkbox label=\"是否用于搜索\" v-model=\"param.searching\" color=\"primary\" hide-details/>\r\n            <v-flex v-if=\"param.searching && param.numeric\" class=\"px-2\">\r\n              搜索过滤区间：\r\n              <v-layout row wrap v-for=\"(s,i) in param.segments\" :key=\"i\">\r\n                <v-flex xs5>\r\n                  <v-text-field prefix=\"From: \" v-model=\"s[0]\" single-line hide-details/>\r\n                </v-flex>\r\n                <v-spacer/>\r\n                <v-flex xs5>\r\n                  <v-text-field prefix=\"To: \" v-model=\"s[1]\" single-line hide-details/>\r\n                </v-flex>\r\n                <v-flex xs1>\r\n                  <v-btn icon @click=\"param.segments.splice(i,1)\">\r\n                    <i class=\"el-icon-delete\"/>\r\n                  </v-btn>\r\n                </v-flex>\r\n              </v-layout>\r\n              <v-layout row>\r\n                <v-spacer/>\r\n                <v-flex xs1>\r\n                  <v-tooltip left>\r\n                    <v-btn slot=\"activator\" icon @click=\"param.segments.push([0,0])\">\r\n                      <v-icon>add</v-icon>\r\n                    </v-btn>\r\n                    <span>点击为数值类型的参数添加分段，便于搜索过滤</span>\r\n                  </v-tooltip>\r\n                </v-flex>\r\n              </v-layout>\r\n            </v-flex>\r\n            <v-checkbox label=\"是否添加可选值\" v-model=\"param.hasOption\" color=\"primary\" hide-details/>\r\n            <v-flex v-if=\"param.hasOption\" class=\"px-2\">\r\n              参数的可选值：\r\n              <v-layout row wrap v-for=\"(s,i) in param.options\" :key=\"i\">\r\n                <v-flex xs8>\r\n                  <v-text-field v-model=\"param.options[i]\" single-line hide-details/>\r\n                </v-flex>\r\n                <v-spacer/>\r\n                <v-flex xs1>\r\n                  <v-btn icon @click=\"param.options.splice(i,1)\">\r\n                    <i class=\"el-icon-delete\"/>\r\n                  </v-btn>\r\n                </v-flex>\r\n              </v-layout>\r\n              <v-layout row>\r\n                <v-spacer/>\r\n                <v-flex xs1>\r\n                  <v-tooltip left>\r\n                    <v-btn slot=\"activator\" icon @click=\"param.options.push('')\">\r\n                      <v-icon>add</v-icon>\r\n                    </v-btn>\r\n                    <span>添加新的可选项值</span>\r\n                  </v-tooltip>\r\n                </v-flex>\r\n              </v-layout>\r\n            </v-flex>\r\n          </v-flex>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer/>\r\n          <v-btn color=\"blue darken-1\" flat @click.native=\"show=false\">取消</v-btn>\r\n          <v-btn color=\"blue darken-1\" flat @click.native=\"save\">保存</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: \"v-spec-param\",\r\n    props: {\r\n      group: {\r\n        type: Object\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        headers: [\r\n          {text: \"id\", value: \"id\", align: \"center\", sortable: false},\r\n          {text: \"参数名\", value: \"name\", align: \"center\", sortable: false},\r\n          {\r\n            text: \"是否为数值\", value: \"numeric\",\r\n            align: \"center\",\r\n            sortable: false\r\n          },\r\n          {text: \"单位\", value: \"unit\", align: \"center\", sortable: false},\r\n          {\r\n            text: \"是否通用\",\r\n            value: \"generic\",\r\n            align: \"center\",\r\n            sortable: false\r\n          },\r\n          {\r\n            text: \"是否可搜索\",\r\n            value: \"searching\",\r\n            align: \"center\",\r\n            sortable: false\r\n          },\r\n          {text: \"操作\", align: \"center\", sortable: false}\r\n        ],\r\n        params: [], // 参数\r\n        show: false,\r\n        param: {},\r\n        isEdit: false\r\n      };\r\n    },\r\n    watch: {\r\n      group: {\r\n        deep: true,\r\n        handler(val) {\r\n          if (val && val.id) {\r\n            this.loadData();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      loadData() {\r\n        this.$http\r\n          .get(\"/item/spec/params?groupId=\" + this.group.id)\r\n          .then(({data}) => {\r\n            data.forEach(p => {\r\n              p.segments = p.segments ? p.segments.split(\",\").map(s => s.split(\"-\")) : [];\r\n              p.options = p.options ? p.options.split(\",\") : [];\r\n              p.hasOption = !!p.options && p.options.length > 0;\r\n            });\r\n            this.params = data;\r\n          })\r\n          .catch(() => {\r\n            this.params = [];\r\n          });\r\n      },\r\n      editParam({...param}) {\r\n        this.param = param;\r\n        this.isEdit = true;\r\n        this.show = true;\r\n      },\r\n      addParam() {\r\n        this.param = {\r\n          categoryId: this.group.categoryId,\r\n          groupId: this.group.id,\r\n          segments: [],\r\n          numeric: false,\r\n          searching: false,\r\n          generic: false,\r\n          options: [],\r\n          hasOptions: false\r\n        };\r\n        this.isEdit = false;\r\n        this.show = true;\r\n      },\r\n      deleteParam(id) {\r\n        this.$message.confirm(\"确认要删除该参数吗？\")\r\n          .then(() => {\r\n            this.$http.delete(\"/item/spec/param/\" + id)\r\n              .then(() => {\r\n                this.$message.success(\"删除成功\");\r\n              })\r\n              .catch(() => {\r\n                this.$message.error(\"删除失败\");\r\n              })\r\n          })\r\n      },\r\n      formatBoolean(boo) {\r\n        return boo ? \"是\" : \"否\";\r\n      },\r\n      save() {\r\n        const {hasOption, ...p}  = this.param;\r\n        p.segments = p.segments.map(s => s.join(\"-\")).join(\",\");\r\n        p.options = p.options.join(\",\");\r\n        this.$http({\r\n          method: this.isEdit ? 'put' : 'post',\r\n          url: '/item/spec/param',\r\n          data: p,\r\n        }).then(() => {\r\n          // 关闭窗口\r\n          this.show = false;\r\n          this.$message.success(\"保存成功！\");\r\n          this.loadData();\r\n        }).catch(() => {\r\n          this.$message.error(\"保存失败！\");\r\n        });\r\n      }\r\n    }\r\n  };\r\n</script>\r\n"],"sourceRoot":"src/views/item/specification"}]}